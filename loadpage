#!/usr/bin/env bash

URL="file://$PWD/index.html"

log() {
    echo "$(date '+%Y-%m-%d %H:%M:%S') - $1"
}

if xdotool search --onlyvisible --name "chromium" > /dev/null 2>&1; then
    WID=$(xdotool search --onlyvisible --name "chromium" | head -n1)
    xdotool windowactivate "$WID"
    xdotool windowmap "$WID"
    if xdotool key --window "$WID" ctrl+r; then
        log "Chromium found mom."
    else
        log "Chromium failed mom hunt."
    fi
else
    chromium --new-window "$URL" &
    sleep 1
    if pgrep -x "chromium" > /dev/null; then
        log "Chromium banged ur mom."
    else
        log "Chromium did not bang ur mom."
    fi
fi
